create table categorias (id bigint generated by default as identity, nome varchar(255), primary key (id));
create table chats (id bigint generated by default as identity, match_id bigint not null unique, primary key (id));
create table item_categoria (categoria_id bigint not null, item_id bigint not null, primary key (categoria_id, item_id));
create table itens (data_criacao timestamp(6), data_devolucao timestamp(6), data_evento timestamp(6), id bigint generated by default as identity, usuario_id bigint, descricao varchar(255), localizacao varchar(255), nome varchar(255), status varchar(255) check (status in ('MATCHING','EM_DEVOLUCAO','RECUPERADO')), tipo varchar(255) check (tipo in ('PERDIDO','ACHADO')), primary key (id));
create table matchs (confirmacao_achado boolean not null, confirmacao_perdido boolean not null, id bigint generated by default as identity, item_achado_id bigint, item_perdido_id bigint, primary key (id), constraint UK_match_itens unique (item_perdido_id, item_achado_id));
create table usuario_chat (chat_id bigint not null, usuario_id bigint not null);
create table usuarios (id bigint generated by default as identity, email varchar(255), nome varchar(255), senha varchar(255), primary key (id));
alter table if exists chats add constraint FKj5d13qnhb0sbkgtcifvfdj7iy foreign key (match_id) references matchs;
alter table if exists item_categoria add constraint FKpiuuoal4c0flpmmtn9a3ovorq foreign key (categoria_id) references categorias;
alter table if exists item_categoria add constraint FKbxxt9bpn91ipi3c5p1ps3f9ej foreign key (item_id) references itens;
alter table if exists itens add constraint FK717df2fscbneby819jvviovmg foreign key (usuario_id) references usuarios;
alter table if exists matchs add constraint FK8t8tkm7jt6g23q4wm5vuu7ywv foreign key (item_achado_id) references itens;
alter table if exists matchs add constraint FK4jcl33hnxrgmnaxs1lga62yc0 foreign key (item_perdido_id) references itens;
alter table if exists usuario_chat add constraint FKosfwufvnjr5vk93jsharryfv5 foreign key (usuario_id) references usuarios;
alter table if exists usuario_chat add constraint FKqceuidiyhcr4d33ygnv5yvk66 foreign key (chat_id) references chats;
